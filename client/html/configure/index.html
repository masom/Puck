<%inherit file="/template.html"/>

<%block name="header">
    Puck Configuration Wizard
</%block>

<div>
	<form action="/configure/save" method="post">
		<button type="submit">Save Configuration</button>
	</form>
</div>

<div>
	<h3>Network Interfaces</h3>
	<table>
		% for key in VM.interfaces:
			<tr>
				<td>${VM.interfaces[key]}</td>
				<td>${key}</td>
			</tr>
		% endfor
	</table>
	
	<h3>Registration</h3>
	${VM.id}
	
	<h3>Environment</h3>
	% if VM.environment:
		<p>${VM.environment}</p>
	% endif
	<a href="/configure/environment">Modify</a>
	
	<h3>Jails</h3>
	<table>
		<tr>
			<th>Type</th>
			<th>Name</th>
		</tr>
	% for jail in VM.jails:
		<tr>
			<td>${jail['type']}</td>
			<td>${jail['name']}</td>
		</tr>
	% endfor
	</table>
	
	<a href="/configure/jails">Modify</a>
	
	<h3>SSH Keys</h3>
	<ul>
	% for key in VM.keys:
		<li>${VM.keys[key]['name']}</li>
	% endfor
	</ul>
	<a href="/configure/keys">Modify</a>
</div>

% if VM.configurationValid():
<div>
	<form action="/vm/setup" method="post">
		<button type="submit">Launch Virtual Machine</button>
	</form>
</div>
% endif